(()=>{var t={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return t.d(e,{a:e}),e},d:(o,e)=>{for(var r in e)t.o(e,r)&&!t.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:e[r]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const e=flarum.core.compat["common/Application"];var r=t.n(e);const n=flarum.core.compat["common/components/Button"];var a=t.n(n);const s=flarum.core.compat["common/components/TextEditor"];var i=t.n(s);const c=flarum.core.compat["common/components/Tooltip"];var u=t.n(c);const d=flarum.core.compat["common/extend"],l=flarum.core.compat["forum/app"];var p=t.n(l);p().initializers.add("nearata-dsts",(function(){(0,d.extend)(r().prototype,"request",(function(t,o){if(!p().session.user||!p().session.user.isAdmin()){var e=p().forum.attribute("apiUrl"),r=o.url.startsWith(e+"/posts"),n="POST"===o.method&&r,a="PATCH"===o.method&&r&&("isHidden"in o.body.data.attributes||"isLiked"in o.body.data.attributes);(n||a)&&t.then((function(){return p().store.find("posts").then((function(){return m.redraw()}))}))}})),(0,d.extend)(i().prototype,"controlItems",(function(t){var o=this;t.add("nearataDsts",m(u(),{text:p().translator.trans("nearata-dsts.forum.button")},[m(a(),{icon:"fas fa-eye-slash",class:"Button Button--icon",onclick:function(){o.attrs.composer.editor.insertAtCursor('[nearata-dsts login="true" like="false" reply="false"][/nearata-dsts]')}})]))}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map