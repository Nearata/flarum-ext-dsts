(()=>{var t={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return t.d(e,{a:e}),e},d:(o,e)=>{for(var n in e)t.o(e,n)&&!t.o(o,n)&&Object.defineProperty(o,n,{enumerable:!0,get:e[n]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const e=flarum.core.compat["common/components/Button"];var n=t.n(e);const r=flarum.core.compat["common/components/TextEditor"];var a=t.n(r);const s=flarum.core.compat["common/components/Tooltip"];var c=t.n(s);const l=flarum.core.compat["common/extend"],u=flarum.core.compat["forum/app"];var i=t.n(u);const f=flarum.core.compat["forum/components/PostStream"];var p=t.n(f);const d=flarum.core.compat["forum/components/ReplyComposer"];var v=t.n(d),y=function(){return i().current.get("discussion").posts().shift()},b=function(){var t=y(),o=t.id(),e=t.contentHtml();if(o)var n=setInterval((function(){i().store.find("posts",o).then((function(t){t.contentHtml()!==e&&(clearInterval(n),m.redraw())}))}),500)};i().initializers.add("nearata-dsts",(function(){(0,l.extend)(p().prototype,"oncreate",(function(){var t=this.element.querySelector(".PostStream > .PostStream-item");if(null!==t){var o=t.querySelector(".item-like > button");null!==o&&o.addEventListener("click",(function(){return b()}))}})),(0,l.extend)(v().prototype,"onsubmit",(function(){var t=y().contentHtml();t&&t.startsWith('<p class="Nearata-dsts">')&&b()})),(0,l.extend)(a().prototype,"controlItems",(function(t){var o=this;t.add("nearataDsts",m(c(),{text:i().translator.trans("nearata-dsts.forum.button")},[m(n(),{icon:"fas fa-eye-slash",class:"Button Button--icon",onclick:function(){o.attrs.composer.editor.insertAtCursor('[nearata-dsts login="true" like="false" reply="false"][/nearata-dsts]')}})]))}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map